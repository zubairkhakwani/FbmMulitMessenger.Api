@using FBMMultiMessenger.Helpers
@inherits LayoutComponentBase
@inject NavigationManager navigationManager


<Microsoft.AspNetCore.Components.Authorization.AuthorizeView Policy="ValidSubscription">
    <NotAuthorized>
        @{
            AuthenticationHelper.HandleUnAuthorizedAccess(context, navigationManager);
        }
    </NotAuthorized>
    <Authorizing>
        <p>auth is happening..........</p>
    </Authorizing>
    <Authorized>
        <FBMMultiMessenger.Components.Shared.CustomErrorBoundary>

            <MudThemeProvider />
            <MudPopoverProvider />
            <MudDialogProvider />
            <MudSnackbarProvider />

            <div class="page">

                <div class="sidebar">
                    <NavMenu />
                </div>
                <main>

                    @if (isMobilePlatform)
                    {
                        <MobileTopRow></MobileTopRow>
                    }
                    else
                    {
                        <div class="top-row px-4">
                        </div>
                    }

                    <article class="content px-4">
                        @Body
                    </article>
                </main>
            </div>


        </FBMMultiMessenger.Components.Shared.CustomErrorBoundary>
    </Authorized>
    
</Microsoft.AspNetCore.Components.Authorization.AuthorizeView>